-- Add migration script here
-- CTRL + ALT + L
-- Option - Command - L
-- https://stackoverflow.com/questions/5706437/whats-the-difference-between-inner-join-left-join-right-join-and-full-join

CREATE TABLE items
(
    id      int primary key GENERATED BY DEFAULT AS IDENTITY,
    item    text             NOT NULL,
    serving double precision NOT NULL,
    protein double precision NOT NULL
);

INSERT INTO items (id, item, serving, protein)
VALUES (1, 'Large Egg', '1', '6.3'),
       (2, 'Egg Whites', '10', '10'),
       (3, '3.25% Milk', '250', '8'),
       (4, 'Orange Juice', '250', '2'),
       (5, 'Oatmeal (Peach''s & Cream)', '33', '2');

CREATE TYPE day_type AS ENUM ('weekdayworkout', 'weekdaynonworkout', 'weekendworkout','weekendnonworkout');

CREATE TABLE days
(
    id           int primary KEY GENERATED BY DEFAULT AS IDENTITY,
    day_type     day_type         NOT NULL,
    num_meals    int              NOT NULL,
    protein_goal double precision NOT NULL
);

INSERT INTO days (id, day_type, num_meals, protein_goal)
VALUES (1, 'weekdayworkout', 6, 200);

CREATE TABLE day_items
(
    day_id      int REFERENCES days (id) ON UPDATE CASCADE ON DELETE CASCADE,
    item_id     int REFERENCES items (id) ON UPDATE CASCADE,
    meal_number int NOT NULL,
    serving     int NOT NULL
);

INSERT INTO day_items (day_id, item_id, meal_number, serving)
VALUES (1, 1, 1, 2),
       (1, 2, 1, 20),
       (1, 3, 1, 250),
       (1, 4, 2, 500),
       (1, 5, 2, 66);

------------------------------------------------------------------------

CREATE TABLE meal_plan
(
    id        int primary key GENERATED BY DEFAULT AS IDENTITY,
    meal_plan text NOT NULL
);

INSERT INTO meal_plan (id, meal_plan)
VALUES (1, 'December 2021');

CREATE TABLE day_meal_times
(
    id          int primary KEY GENERATED BY DEFAULT AS IDENTITY,
    meal_number int  NOT NULL,
    meal_time   text NOT NULL,
    day_id      int REFERENCES days (id) ON UPDATE CASCADE
);

CREATE TABLE meals
(
    id   int primary key GENERATED BY DEFAULT AS IDENTITY,
    meal text NOT NULL
);

INSERT INTO meals (id, meal)
VALUES (1, 'Breakfast'),
       (2, 'Lunch');

CREATE TABLE meal_items
(
    meal_id int REFERENCES meals (id) ON UPDATE CASCADE ON DELETE CASCADE,
    item_id int REFERENCES items (id) ON UPDATE CASCADE,
    PRIMARY KEY (meal_id, item_id)
);

INSERT INTO meal_items (meal_id, item_id)
VALUES (1, 1),
       (1, 2),
       (1, 3),
       (2, 4),
       (2, 5);






